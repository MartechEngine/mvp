Phase: 2 - User Identity & Authentication
Part: 2.10
Title: Frontend Authentication UI & Forms
Depends On: 2.9-Frontend-Auth-Hooks.md
Objective: To implement the user-facing UI components for login and registration. This file showcases how to build accessible, responsive, and validated forms using React Hook Form, Zod, and our custom authentication hooks, providing a seamless user experience.
1. Core Principle: Declarative and "Dumb" Components
The UI components themselves are "dumb." They are only responsible for rendering the UI based on the state (e.g., isLoading) provided by the hooks and calling the mutation functions (login, register) on user interaction. They contain no complex state management or data-fetching logic themselves.

2. shadcn/ui Setup
Before building forms, we need to set up shadcn/ui for consistent, accessible UI components.

**Installation Commands (run in the frontend directory):**
```bash
# Initialize shadcn/ui
npx shadcn-ui@latest init

# Install required UI components
npx shadcn-ui@latest add button
npx shadcn-ui@latest add input
npx shadcn-ui@latest add form
npx shadcn-ui@latest add card
npx shadcn-ui@latest add label
```

**Configuration:**
During `npx shadcn-ui@latest init`, use these settings:
- TypeScript: Yes
- Style: Default
- Base color: Slate
- Global CSS file: src/app/globals.css
- CSS variables: Yes
- Tailwind config: tailwind.config.js
- Components directory: src/components
- Utils directory: src/lib/utils

3. Additional Dependencies Installation
We need several libraries for building high-quality forms.
Installation Command (run in the frontend directory):
npm install react-hook-form @hookform/resolvers zod lucide-react react-hot-toast
(Note: lucide-react is for icons, and react-hot-toast is for notifications).
3. Form Validation Schemas (Zod)
We'll centralize our form validation logic using Zod. This ensures that the validation rules are consistent and can be used to infer TypeScript types.
File Location: frontend/src/lib/validators/auth.validators.ts
File Content:
import { z } from 'zod';

// Schema for the Login form
export const loginSchema = z.object({
  email: z
    .string()
    .min(1, { message: "Email is required." })
    .email({ message: "Please enter a valid email address." }),
  password: z
    .string()
    .min(1, { message: "Password is required." }),
});

// Schema for the Registration form
// Note: Field names use snake_case to match backend API expectations
export const registerSchema = z.object({
  full_name: z
    .string()
    .min(2, { message: "Full name must be at least 2 characters." }),
  organization_name: z
    .string()
    .min(2, { message: "Organization name must be at least 2 characters." }),
  email: z
    .string()
    .min(1, { message: "Email is required." })
    .email({ message: "Please enter a valid email address." }),
  password: z
    .string()
    .min(8, { message: "Password must be at least 8 characters." }),
});

// We can infer the TypeScript types directly from our schemas
export type LoginFormData = z.infer<typeof loginSchema>;
export type RegisterFormData = z.infer<typeof registerSchema>;

4. Login Page and Form Component
This is the main login page for the application, which will live at app.martechengine.ai/login.
(Note: This assumes you have shadcn/ui components for Card, Button, Input, etc. set up. If not, these can be replaced with standard HTML elements.)
File Location: frontend/src/app/(auth)/login/page.tsx
"use client";

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import Link from 'next/link';
import { Loader2 } from 'lucide-react';

import { useLogin } from '@/hooks/useAuth';
import { loginSchema, LoginFormData } from '@/lib/validators/auth.validators';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';

export default function LoginPage() {
  // 1. Consume the custom hook
  const { mutate: login, isPending: isLoading } = useLogin();

  const form = useForm<LoginFormData>({
    resolver: zodResolver(loginSchema),
    defaultValues: {
      email: '',
      password: '',
    },
  });

  // 2. The submit handler calls the mutate function from the hook
  const onSubmit = (data: LoginFormData) => {
    login(data);
  };

  return (
    <div className="flex min-h-screen items-center justify-center bg-gray-50 p-4">
      <Card className="w-full max-w-sm">
        <CardHeader>
          <CardTitle className="text-2xl">Login</CardTitle>
          <CardDescription>
            Enter your email below to login to your account
          </CardDescription>
        </CardHeader>
        <CardContent>
          <Form {...form}>
            <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
              <FormField
                control={form.control}
                name="email"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Email</FormLabel>
                    <FormControl>
                      <Input placeholder="m@example.com" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
              <FormField
                control={form.control}
                name="password"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Password</FormLabel>
                    <FormControl>
                      <Input type="password" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
              {/* 3. The button's state is driven directly by the hook's isLoading flag */}
              <Button type="submit" className="w-full" disabled={isLoading}>
                {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                {isLoading ? 'Signing in...' : 'Sign in'}
              </Button>
            </form>
          </Form>
          <div className="mt-4 text-center text-sm">
            Don't have an account?{' '}
            <Link href="/signup" className="underline">
              Sign up
            </Link>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
5. Signup Page and Form Component
This is the main registration page for the application.
File Location: frontend/src/app/(auth)/signup/page.tsx
File Content:
"use client";

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import Link from 'next/link';
import { Loader2 } from 'lucide-react';

import { useRegister } from '@/hooks/useAuth';
import { registerSchema, RegisterFormData } from '@/lib/validators/auth.validators';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';

export default function SignupPage() {
  const { mutate: register, isPending: isLoading } = useRegister();

  const form = useForm<RegisterFormData>({
    resolver: zodResolver(registerSchema),
    defaultValues: {
      full_name: '',
      organization_name: '',
      email: '',
      password: '',
    },
  });

  const onSubmit = (data: RegisterFormData) => {
    // Data already uses snake_case field names matching backend API
    register(data);
  };

  return (
    <div className="flex min-h-screen items-center justify-center bg-gray-50 p-4">
      <Card className="mx-auto w-full max-w-sm">
        <CardHeader>
          <CardTitle className="text-2xl">Sign Up</CardTitle>
          <CardDescription>
            Create your account to get started.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <Form {...form}>
            <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
              <FormField control={form.control} name="full_name" render={({ field }) => (
                <FormItem><FormLabel>Full Name</FormLabel><FormControl><Input placeholder="John Doe" {...field} /></FormControl><FormMessage /></FormItem>
              )}/>
              <FormField control={form.control} name="organization_name" render={({ field }) => (
                <FormItem><FormLabel>Organization Name</FormLabel><FormControl><Input placeholder="Acme Inc." {...field} /></FormControl><FormMessage /></FormItem>
              )}/>
              <FormField control={form.control} name="email" render={({ field }) => (
                <FormItem><FormLabel>Email</FormLabel><FormControl><Input placeholder="m@example.com" {...field} /></FormControl><FormMessage /></FormItem>
              )}/>
              <FormField control={form.control} name="password" render={({ field }) => (
                <FormItem><FormLabel>Password</FormLabel><FormControl><Input type="password" {...field} /></FormControl><FormMessage /></FormItem>
              )}/>
              <Button type="submit" className="w-full" disabled={isLoading}>
                {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                {isLoading ? 'Creating account...' : 'Create Account'}
              </Button>
            </form>
          </Form>
          <div className="mt-4 text-center text-sm">
            Already have an account?{' '}
            <Link href="/login" className="underline">
              Login
            </Link>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
6. Next Steps
With the UI components for authentication complete, we have a functional user onboarding flow. The remaining pieces of this phase are to handle email verification and build the main application shell for authenticated users.
Next File: 2.10.2-Frontend-Email-Verification-UI.md will create the page and logic to handle users clicking the verification link in their email.
