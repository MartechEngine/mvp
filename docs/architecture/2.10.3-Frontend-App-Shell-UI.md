Phase: 2 - User Identity & Authentication
Part: 2.10.3
Title: Frontend Application Shell UI
Depends On: 2.10.2-Frontend-Email-Verification-UI.md
Objective: To implement the main application shell, which includes the global Header and the project-centric Sidebar. This shell serves as the persistent navigation and context wrapper for all protected dashboard pages, providing a consistent and intuitive user experience.
1. Core Principle: Contextual Navigation
The application shell is the primary interface for user navigation and context switching.
The Header is Global: It manages the user's session and the currently active project.
The Sidebar is a Workspace: Its content and links are entirely dependent on the project selected in the header.
2. App Shell Layout Component
This is the root layout for the entire /(dashboard) route group. It orchestrates the placement of the header, sidebar, and the main content area for all child pages.
File Location: frontend/src/app/(dashboard)/layout.tsx
File Content:
import { RouteGuard } from '@/components/auth/RouteGuard'; // From 2.11
import { Header } from '@/components/layout/Header';
import { Sidebar } from '@/components/layout/Sidebar';

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <RouteGuard>
      <div className="flex h-screen w-full overflow-hidden bg-muted/40">
        <Sidebar />
        <div className="flex flex-1 flex-col overflow-y-auto overflow-x-hidden">
          <Header />
          <main className="flex-1 p-4 sm:p-6 md:p-8">
            {children}
          </main>
        </div>
      </div>
    </RouteGuard>
  );
}```

### **3. Header Component**

The Header is responsible for global actions: project selection, credit status, and user settings.

**File Location:** `frontend/src/components/layout/Header.tsx`
**File Content:**
```tsx
"use client";

// Placeholder components to be created in later phases
const ProjectSelector = () => <div className="text-sm font-medium">Project Selector [Phase 3]</div>;
const CreditMeter = () => <div className="text-sm">Credits: 50 [Phase 3]</div>;
const UserNav = () => {
    const { useLogout } = require('@/hooks/useAuth');
    const { mutate: logout } = useLogout();
    return <button onClick={() => logout()} className="text-sm p-2 bg-gray-200 rounded">Logout</button>;
};


export function Header() {
  return (
    <header className="sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6">
      <div className="flex w-full items-center gap-4">
        {/* The Project Selector is the primary context switcher */}
        <ProjectSelector />
        
        <div className="ml-auto flex items-center gap-4">
          <CreditMeter />
          <UserNav />
        </div>
      </div>
    </header>
  );
}
Note: ProjectSelector, UserNav, and CreditMeter are defined as simple placeholders for now. They will be built out with real data from our custom hooks in their respective phases.)
4. Sidebar Component
The Sidebar provides navigation within the currently selected project. It will use the useParams hook from Next.js to get the projectId from the URL and render the appropriate links.
File Location: frontend/src/components/layout/Sidebar.tsx
File Content:
"use client";

import Link from 'next/link';
import { usePathname, useParams } from 'next/navigation';
import { cn } from '@/lib/utils';
import {
  LayoutDashboard,
  Search,
  BookText,
  Users,
  Bot,
  ScrollText,
} from 'lucide-react';

export function Sidebar() {
  const pathname = usePathname();
  const params = useParams();
  const projectId = params.projectId as string;

  // If there's no projectId in the URL, we might be on the root /dashboard page.
  // In that case, we can show a limited sidebar or hide it. For now, we'll disable links.
  const navItems = [
    { href: `/projects/${projectId}/dashboard`, label: 'Dashboard', icon: LayoutDashboard },
    { href: `/projects/${projectId}/site-audit`, label: 'Site Audit', icon: Search },
    { href: `/projects/${projectId}/keywords`, label: 'Keyword Research', icon: BookText },
    { href: `/projects/${projectId}/competitors`, label: 'Competitor Analysis', icon: Users },
    { href: `/projects/${projectId}/content`, label: 'Content Hub', icon: Bot },
  ];

  return (
    <aside className="hidden w-64 flex-col border-r bg-background md:flex">
      <div className="flex h-14 items-center border-b px-6 lg:h-[60px]">
        <Link href="/dashboard" className="flex items-center gap-2 font-semibold">
          <ScrollText className="h-6 w-6" />
          <span>MartechEngine</span>
        </Link>
      </div>
      <nav className="flex-1 p-4">
        <ul className="space-y-1">
          {navItems.map((item) => (
            <li key={item.label}>
              <Link
                href={projectId ? item.href : '#'}
                className={cn(
                  'flex items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary',
                  { 'bg-muted text-primary': pathname === item.href },
                  { 'pointer-events-none opacity-50': !projectId } // Disable if no project is selected
                )}
              >
                <item.icon className="h-4 w-4" />
                {item.label}
              </Link>
            </li>
          ))}
        </ul>
      </nav>
    </aside>
  );
}

5. Placeholder Dashboard Page
To make the layout functional, we need a default page for the /(dashboard) group.
File Location: frontend/src/app/(dashboard)/dashboard/page.tsx
File Content:
export default function DashboardRootPage() {
  return (
    <div>
      <h1 className="text-3xl font-bold">Main Dashboard</h1>
      <p className="text-muted-foreground mt-2">
        This is the main dashboard where users will see a list of their projects.
      </p>
      <p className="mt-4">The project list and creation UI will be built in Phase 3.</p>
    </div>
  );
}
6. Next Steps
With the application shell designed, a user can now log in and see the full, intended structure of the application. The navigation is in place, and we have clear "slots" to fill with feature-specific UI in the upcoming phases. The final step of Phase 2 is to secure this new layout.
Next File: 2.11-Frontend-Route-Protection.md will implement the RouteGuard component to ensure that only authenticated users can access the dashboard layout.