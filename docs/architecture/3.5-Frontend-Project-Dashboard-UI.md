Phase: 3 - Core Application & Project Management
Part: 3.5
Title: Frontend Main Dashboard & Project Hub UI
Depends On: 3.4-Frontend-Project-Hooks.md
Objective: To implement the primary UI for the main application dashboard, located at /dashboard. This page serves as the central hub where users can view a list of all their projects, create new ones, and navigate into a specific project's workspace.
1. Core Principle: The Central Hub
This page is the user's landing point after logging in. Its primary purpose is to provide a high-level overview and act as a springboard into a specific project. It is intentionally kept simple and focused on project management.
2. Main Dashboard Page Component (/dashboard)
This component orchestrates the layout, including the header, the "Create Project" button, and the project list itself.
File Location: frontend/src/app/(dashboard)/dashboard/page.tsx (Modification)
File Content:
"use client";

import { useProjects } from '@/hooks/useProjects';
import { ProjectList } from '@/components/features/projects/ProjectList';
import { CreateProjectModal } from '@/components/features/projects/CreateProjectModal';
import { Skeleton } from '@/components/ui/skeleton';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';
import { AlertCircle } from 'lucide-react';

export default function MainDashboardPage() {
  const { data: projects, isLoading, isError, error } = useProjects();

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold tracking-tight">Projects</h1>
          <p className="text-muted-foreground">
            Select a project to continue or create a new one to get started.
          </p>
        </div>
        <CreateProjectModal />
      </div>

      {isLoading && <ProjectListSkeleton />}
      
      {isError && (
        <Alert variant="destructive">
          <AlertCircle className="h-4 w-4" />
          <AlertTitle>Failed to load projects</AlertTitle>
          <AlertDescription>
            {error?.message || "An unexpected error occurred. Please try refreshing the page."}
          </AlertDescription>
        </Alert>
      )}

      {projects && <ProjectList projects={projects} />}
    </div>
  );
}

// A helper component to show a loading state for the project list.
const ProjectListSkeleton = () => (
  <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    {[...Array(3)].map((_, i) => (
      <Skeleton key={i} className="h-40 rounded-lg" />
    ))}
  </div>
);
3. Project List & Card Components
This component is responsible for rendering the list of projects. Each card links to that project's specific dashboard (/projects/{projectId}/dashboard).
File Location: frontend/src/components/features/projects/ProjectList.tsx
File Content:
import { Project } from '@/types/project';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import Link from 'next/link';
import { formatDistanceToNow } from 'date-fns';

interface ProjectListProps {
  projects: Project[];
}

export function ProjectList({ projects }: ProjectListProps) {
  if (projects.length === 0) {
    return (
      <div className="text-center py-20 border-2 border-dashed rounded-lg">
        <h3 className="text-2xl font-semibold tracking-tight">You have no projects yet</h3>
        <p className="text-muted-foreground mt-2">
          Click "New Project" to create your first workspace.
        </p>
      </div>
    );
  }

  return (
    <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      {projects.map((project) => (
        <ProjectCard key={project.id} project={project} />
      ))}
    </div>
  );
}

// Individual project card
function ProjectCard({ project }: { project: Project }) {
  return (
    <Link href={`/projects/${project.id}/dashboard`}>
      <Card className="hover:shadow-lg hover:border-primary transition-all h-full flex flex-col justify-between">
        <CardHeader>
          <CardTitle className="truncate">{project.name}</CardTitle>
          <CardDescription className="truncate text-blue-500">{project.url}</CardDescription>
        </CardHeader>
        <CardContent>
          {/* We can add more high-level info here in the future, like the DCS score */}
        </CardContent>
        <div className="text-xs text-muted-foreground px-6 pb-4 pt-2">
          Updated {formatDistanceToNow(new Date(project.updated_at), { addSuffix: true })}
        </div>
      </Card>
    </Link>
  );
}
4. Create Project Modal Component
This component provides the UI for creating a new project, using a dialog/modal.
File Location: frontend/src/components/features/projects/CreateProjectModal.tsx
File Content:
"use client";

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { Loader2 } from 'lucide-react';

import { useCreateProject } from '@/hooks/useProjects';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';
import { toast } from 'react-hot-toast';

const createProjectSchema = z.object({
  name: z.string().min(3, { message: 'Project name must be at least 3 characters.' }),
  url: z.string().url({ message: 'Please enter a valid URL.' }),
});

type CreateProjectFormData = z.infer<typeof createProjectSchema>;

export function CreateProjectModal() {
  const [isOpen, setIsOpen] = useState(false);
  const { mutate: createProject, isPending: isLoading } = useCreateProject();

  const form = useForm<CreateProjectFormData>({
    resolver: zodResolver(createProjectSchema),
    defaultValues: { name: '', url: '' },
  });

  const onSubmit = (data: CreateProjectFormData) => {
    createProject(data, {
      onSuccess: () => {
        setIsOpen(false);
        form.reset();
      },
    });
  };
  
  return (
    <Dialog open={isOpen} onOpenChange={setIsOpen}>
      <DialogTrigger asChild>
        <Button>New Project</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Create a New Project</DialogTitle>
          <DialogDescription>
            Enter a name and the website URL to start your analysis.
          </DialogDescription>
        </DialogHeader>
        <Form {...form}>
          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
            <FormField control={form.control} name="name" render={({ field }) => (
              <FormItem><FormLabel>Project Name</FormLabel><FormControl><Input placeholder="My Awesome Website" {...field} /></FormControl><FormMessage /></FormItem>
            )}/>
            <FormField control={form.control} name="url" render={({ field }) => (
              <FormItem><FormLabel>Website URL</FormLabel><FormControl><Input placeholder="https://example.com" {...field} /></FormControl><FormMessage /></FormItem>
            )}/>
            <DialogFooter>
              <Button type="button" variant="ghost" onClick={() => setIsOpen(false)}>Cancel</Button>
              <Button type="submit" disabled={isLoading}>
                {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                Create Project
              </Button>
            </DialogFooter>
          </form>
        </Form>
      </DialogContent>
    </Dialog>
  );
}
5. Next Steps
We have now designed the core UI for project management. Users can log in, see their projects, and create new ones. The next step is to build the backend functionality for managing user profiles, which is a key part of the "Account Settings" area.
Next File: 3.6-Backend-User-Profile-Service.md will create the backend service and API endpoints for updating user profiles and changing passwords.