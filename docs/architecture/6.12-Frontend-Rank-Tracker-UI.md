# Phase: 6 - Content & Analysis Suite
# Part: 6.12
# Title: Frontend Rank Tracker UI
# Depends On: 6.11-Backend-Rank-Tracker-Service.md

**Objective:** To design and specify the frontend architecture for the **Keyword Rank Tracker** page. This UI will provide users with a clear, interactive dashboard to monitor their search engine ranking for specific keywords over time.

### 1. Core Principles

*   **Visual First:** The primary focus is on data visualization. The UI will use charts to make rank trends immediately obvious.
*   **Clarity & Context:** The interface will clearly display the current rank, the change since the last check, and the ranking URL.
*   **Effortless Management:** Adding, viewing, and managing tracked keywords should be a simple and intuitive process.

### 2. Component Breakdown

The Rank Tracker UI will be located at `/projects/{projectId}/keyword-research/tracker`.

*   **`RankTrackerPage.tsx`**: The main container component. It will manage the overall layout and orchestrate data fetching for its child components.
*   **`AddKeywordForm.tsx`**: A form component, likely displayed prominently at the top of the page or in a modal. It will contain inputs for the keyword, target location, and language.
*   **`TrackedKeywordsTable.tsx`**: The main data display. This will be a rich data table listing all keywords being tracked for the project.
    *   **Columns:** Keyword, Location/Language, Current Rank, Change (e.g., +2, -1), Ranking URL, and a historical trend sparkline.
    *   **Actions:** Each row will have actions to "View History" or "Remove".
*   **`RankHistoryChart.tsx`**: A modal or an expandable section that appears when a user clicks "View History". It will display a larger, more detailed line chart showing the ranking of a single keyword over time.
*   **`useRankTracker.ts`**: A new custom React Query hook to handle all API interactions with the `/api/v1/projects/{projectId}/tracker` endpoints.

### 3. Data Flow & State Management

1.  **Initial Load:** The `RankTrackerPage` loads and uses the `useRankTracker` hook to fetch the list of all tracked keywords for the current project.
2.  **Display Data:** The `TrackedKeywordsTable` receives the list of keywords and renders them. The most recent rank is displayed.
3.  **Adding a Keyword:** The user fills out the `AddKeywordForm`. On submission, the `useRankTracker` hook calls the `POST /` endpoint. On success, it invalidates the query for the keyword list to refetch and show the new keyword.
4.  **Viewing History:** Clicking "View History" on a keyword in the table passes the `tracked_keyword_id` to the `RankHistoryChart` component, which then uses the `useRankTracker` hook to fetch the detailed time-series data for that specific keyword.
5.  **On-Demand Refresh:** A "Refresh" button on each row will call a mutation function from the `useRankTracker` hook, which triggers the `POST /{tracked_keyword_id}/refresh` endpoint. The UI will show a loading state for that row until the check is complete.

### 4. API Integration (`useRankTracker.ts`)

This hook will manage the following API calls using React Query:

*   **`getTrackedKeywords`**: `useQuery` to fetch from `GET /`.
*   **`addTrackedKeyword`**: `useMutation` to post to `POST /`.
*   **`getKeywordHistory`**: `useQuery` to fetch from `GET /{tracked_keyword_id}/history`. This query will be disabled by default and only enabled when a user wants to view the history for a specific keyword.
*   **`refreshKeywordRank`**: `useMutation` to post to `POST /{tracked_keyword_id}/refresh`.

### 5. Conclusion

This document, along with its backend counterpart (`6.11`), provides the complete architectural design for the Keyword Rank Tracker feature. The next and final step to complete the architectural blueprint is to create the missing `6.9.1-Frontend-Intelligence-UI-Hooks.md` file.
