Phase: 6 - Content & Analysis Suite
Part: 6.9
Title: Enterprise Frontend Intelligence Hub UI
Depends On: 6.8-Backend-Intelligence-API.md

**Objective:** To design and specify the frontend architecture for a unified, data-rich, and interactive **Intelligence Hub**. This hub will serve as the central dashboard for users to access all the features of the Content & Analysis Suite, including keyword analysis, backlink profiles, competitor intelligence, and on-demand content generation.

### 1. Core Principles

*   **Unified Dashboard:** All analysis tools will be presented in a single, cohesive interface, allowing users to seamlessly switch between different views (e.g., from keyword clusters to competitor gaps) without navigating to different pages.
*   **Data-Rich & Actionable:** The UI will not just display data but will be designed to highlight actionable insights. It will use data visualizations, clear CTAs, and contextual information to guide the user.
*   **Performant & Responsive:** The dashboard will handle large datasets efficiently. We will use techniques like virtualization for long lists, pagination, and intelligent caching with React Query to ensure a smooth experience. The UI will be fully responsive.
*   **Credit-Awareness:** The UI will clearly communicate the credit cost of any action. Before a user initiates a credit-consuming analysis (e.g., keyword clustering), a confirmation modal will appear stating the cost and asking for approval.

### 2. Component Breakdown

The Intelligence Hub will be a modular, tab-based interface:

*   **`IntelligenceHubPage.tsx`**: The main container component that manages the overall layout, project selection, and the tabbed navigation.
*   **`ProjectTabs.tsx`**: A tab component to switch between different analysis views: `Keyword Analysis`, `Backlink Profile`, `Competitor Analysis`, and `Content Generation`.
*   **`KeywordAnalysisView.tsx`**: Displays the results from the keyword analysis service, including semantic clusters and keyword details. It will feature a CTA to trigger the analysis if it hasn't been run.
*   **`BacklinkAnalysisView.tsx`**: Visualizes the backlink profile summary with charts for link types and domain authority distribution.
*   **`CompetitorAnalysisView.tsx`**: Shows the AI-generated executive summary and the list of identified keyword gaps.
*   **`ContentGenerationView.tsx`**: A dedicated area where users can access and manage all content generated for the project (e.g., meta tags, articles).
*   **`CreditCostModal.tsx`**: A reusable modal that appears before any credit-consuming action is taken, displaying the cost and requiring user confirmation.
*   **`useIntelligenceAPI.ts`**: A custom React Query hook to manage all API interactions with the `/api/v1/intelligence` endpoints.

### 3. Data Flow & State Management

1.  **Initial Load:** The `IntelligenceHubPage` loads, defaulting to a specific project.
2.  **On-Demand Fetching:** Each tab view (`KeywordAnalysisView`, etc.) is responsible for its own data fetching via the `useIntelligenceAPI` hook. Data is only fetched when a tab is active for the first time.
3.  **Triggering Analysis:** If a user clicks the "Analyze Keywords" CTA, the `useIntelligenceAPI` hook triggers the `GET /{project_id}/keyword-analysis` endpoint.
4.  **Handling Credit Errors:** If the API returns a `402 Payment Required` status, the hook will catch this error. The UI will then display a notification prompting the user to purchase more credits, with a link to the pricing page.
5.  **Caching:** React Query will cache the results of each analysis, preventing redundant API calls when switching between tabs.
6.  **Content Generation:** In the `ContentGenerationView` or from a specific CTA, the user can trigger a content generation request. The `useIntelligenceAPI` hook will call `POST /generate-content` and update the UI upon success.

### 4. API Integration

The `useIntelligenceAPI.ts` hook will manage the following calls:

*   **`getKeywordAnalysis`**: `GET /{project_id}/keyword-analysis`
*   **`getBacklinkAnalysis`**: `GET /{project_id}/backlink-analysis`
*   **`getCompetitorAnalysis`**: `GET /{project_id}/competitor-analysis`
*   **`generateContent`**: `POST /generate-content`

All data-fetching functions will use `useQuery` with appropriate cache keys (e.g., `['keywordAnalysis', project_id]`). The `generateContent` function will use `useMutation` and will be configured to invalidate relevant queries (like a list of generated assets) upon success.

### 5. Conclusion

This document concludes the architectural design phase for the core MartechEngine platform. With the backend services fully designed and the frontend UI for both monetization and the core intelligence features now specified, the project has a complete and robust blueprint for implementation. All identified documentation gaps have been filled.
